{{Include "header"}}
{{Include "header-bar"}}
<div class="container-fluid main-content admin-page">
    <div class="col-xs-12 justify-content-md-center" style="position:relative;padding:0px;margin:0px 0px 0px 0px; bottom:65px; top:30px;">
        <div class="col-xs-9 col-sm-8" style="padding:0px;">
            <form method="GET" id="search-form">
                <div id="search_box" class="input-group search" style="float:left;">
                    <input type="text" class="form-control camelcaseFixPlaceHolder"
                           id="search" name="search" placeholder="Search..." value="{{ .Search }}">
                    <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>
                </div>
                {{ if .Search }}
                    <a href="javascript:void(0)" onclick="$('#search').val('');$('#search-form').submit();">Clear</a>
                {{ end }}
            </form>
        </div>
        {{$initialOrderList := .InitialOrderList }}
        {{$initialOrder := .InitialOrder }}
        <div class="col-xs-3 col-sm-4" style="padding:0px;">
            {{ if .PermissionForBlueprint.HasAddPermission }}
            <a class="btn btn-primary search pull-right" href="{{.CurrentURL}}/new">
                <i class="fa fa-plus"></i>
            </a>
            {{ end }}
        </div>
        <div class="col-xs-12" style="padding:0px;margin:0px;margin-top:5px;" >
            <div class="{{if not .ListFilter.IsEmpty}}col-sm-10{{else}}col-sm-12{{end}} main-content2" style="margin:0px;padding:0px;overflow-x:auto;">
                <table style="margin:0px;padding:0px;width:100%;" id="listtable" class="table table-striped  table-bordered  table-hover table-condensed float-header">
                    <thead class="admin_font" >
                    <tr class="table-header capitalized">
                        <th class="checkbox-container">
                            <input id="main_check" class="" type="checkbox">
                        </th>
                        {{range .ListDisplay.GetAllFields}}
                            <th class="trigger_desc pointer" ><a href="{{ if .IsEligibleForOrdering }}?initialOrder={{$initialOrder}}&o={{.GetOrderingName $initialOrderList}}{{ end }}" class="camelcaseFix">{{.DisplayName}}</a>
                                <span class="fa-stack fa-fw pull-right">
                                    <i class="fontdarkgray fa fa-sort-asc fa-stack-1x"></i>
                                    <i class="fontdarkgray fa fa-sort-desc fa-stack-1x"></i>
                                </span>
                            </th>
                        {{end}}
                    </tr>
                    </thead>
                    <tbody>
                    {{$listDisplay := .ListDisplay}}
                    {{$currentURL := .CurrentURL}}
                    {{range $iterateAdminObjects := .AdminFilterObjects.GetPaginated}}
                        <tr>
                            <td onclick="$('#main_check').prop('checked', false);">
                                <input  class="item_check" type="checkbox">
                            </td>
                            {{$i  := 0 }}
                            {{range $field := $listDisplay.GetAllFields}}
                                <td>{{if eq $i 0}}<a href="{{$currentURL}}/{{$iterateAdminObjects.Id}}">{{ end }}{{ $field.GetValue $iterateAdminObjects.Model}}{{if eq $i 0}}</a>{{ end }}</td>
                                {{ $i = (add $i 1) }}
                            {{end}}
                        </tr>
                    {{end}}
                    </tbody>
                </table>
            </div>
            {{if not .ListFilter.IsEmpty}}
            <div class="col-sm-2" style="">
                {{ $fullUrl := .FullURL }}
                {{range $lf := .ListFilter.Iterate}}
                <div class="form-group" class="categorical_filter_fields" style="background:#efefef;padding:10px;">
                    <label class="camelcaseFix">{{ .Title }}</label>&nbsp;&nbsp;&nbsp;
                    <i style="font-size:18px;" class="fa fa-info-circle pointer" data-toggle="tooltip" data-placement="bottom" title="Filter By {{ .Title }}"></i><br/>
                    {{if $lf.IsItActive $fullUrl }}
                    <a href="{{ $lf.GetURLToClearFilter $fullUrl }}">All</a><br/>
                    {{end}}
                    {{ range $i, $option := .OptionsToShow }}
                    {{if $lf.IsThatOptionActive $option $fullUrl }}
                    {{ $option.DisplayAs }}<br/>
                    {{else}}
                    <a href="{{ $lf.GetURLForOption $option $fullUrl }}">{{ $option.DisplayAs }}</a><br/>
                    {{end}}
                    {{ end }}
                </div>
                {{end}}
            </div>
            {{end}}
        </div>
    </div>
    <div class="fixed-bottom bg-footer default-padding z-index9 admin_font bold">
        {{ if .PermissionForBlueprint.HasDeletePermission }}
        <div class="col-sm-4 col-xs-2">
            <button onclick="BuildDeleteList('item_check')" class="hidden-xs btn btn-danger capitalized"><i class="fa fa-trash fa-fw"></i>&nbsp;{{Tf "uadmin/system" .Language.Code "Delete Selected"}}</button>
            <button onclick="BuildDeleteList('item_check')" class="hidden-sm hidden-md hidden-lg btn-xs btn btn-danger capitalized"><i class="fa fa-trash fa-fw"></i></button>
        </div>
        {{end}}
        <div class="col-sm-4 col-xs-8">
            <center><ul id="pagination_container" class="pagination pagination-sm pagination-xs" style="margin:0px;"></ul></center>
        </div>
        <div class="col-sm-4 col-xs-2">
            <div style="display:inline-block;float:right;">
                <form id="export_form" method="POST">
                    <input type="hidden" class="form-control camelcaseFixPlaceHolder"
                           name="export" placeholder="Search..." value="export" />
                    <button type="submit" class="btn btn-success search pull-right">
                        <i class="fa fa-table"></i> {{Tf "uadmin/system" .Language.Code "Excel"}}
                    </button>
                </form>
            </div>
        </div>

    </div>
</div>
    {{Include "uadminjs"}}
<script type="text/javascript">
    $('#main_check').click(function(ev) {
        var status = $(ev.currentTarget).prop('checked');
        $('.item_check').prop('checked', status);
    });
    GET = (function(win, doc){
        var loc = win.location,
            arr = loc.search.length > 1 ? loc.search.substr(1).split("&") : [],
            params = {},
            len = arr.length,
            i = 0;

        for (; i < len; i ++) {
            if (arr[i] !== "") {
                var tmp = arr[i].split("=");
                params[tmp[0]] = tmp[1] ? decodeURI(tmp[1]) : "";
            }
        }

        return params;
    })(window, document);
    paginator('pagination_container', {{ .TotalRecords }});
</script>
{{Include "footer"}}
